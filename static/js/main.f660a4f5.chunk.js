(this.webpackJsonpblog_view=this.webpackJsonpblog_view||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(20),i=n.n(s),r=(n(26),n(12)),o=n(19),j=n(7),l=n(14),d=(n(27),n(9)),m=n(2),u=(n(28),n(1)),b=function(e){var t=Object(m.g)().id,n=e.posts.filter((function(e){return e._id===t}))[0],c=null;return"undefined"!==typeof n.title&&(c=n.comments.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:e.username}),Object(u.jsx)("p",{className:"date",children:new Date(e.date).toLocaleDateString()}),Object(u.jsx)("p",{className:"comment-text",children:e.text})]},e._id)}))),Object(u.jsxs)("div",{className:"Post",children:[Object(u.jsx)("h1",{className:"title",children:n.title}),Object(u.jsx)("p",{className:"date",children:new Date(n.date).toLocaleDateString()}),Object(u.jsx)("p",{children:n.text}),Object(u.jsx)("h2",{className:"comment-title",children:"Comments"}),Object(u.jsx)("ol",{className:"comment-list",children:c}),Object(u.jsxs)("form",{onSubmit:e.addComment,method:"POST","data-id":t,className:"form",children:[Object(u.jsx)("h3",{children:"Add Comment"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username"}),Object(u.jsx)("input",{onChange:e.handleInput,type:"text",name:"username",placeholder:"username",id:"username",value:e.comment.username,required:!0})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"text",children:"Comment"}),Object(u.jsx)("textarea",{onChange:e.handleInput,id:"text",name:"text",placeholder:"Comment",value:e.comment.text,required:!0,rows:"5"})]}),Object(u.jsx)("button",{type:"submit",children:"Submit"})]})]})},h=(n(38),function(){return Object(u.jsx)("div",{className:"loader-wrapper",children:Object(u.jsx)("div",{className:"loader",children:"Loading"})})});function O(){var e=Object(m.f)().pathname;return Object(c.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var x=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!0),i=Object(l.a)(s,2),x=i[0],p=i[1],f="https://blog-api22.herokuapp.com";Object(c.useEffect)((function(){fetch("".concat(f,"/posts"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(e),p(!1)}))}),[]);var v=[];n.length&&(v=n.map((function(e){return e.published?Object(u.jsx)("li",{className:"post",children:Object(u.jsxs)(d.b,{to:"/".concat(e._id),children:[Object(u.jsx)("h1",{children:e.title}),Object(u.jsx)("p",{className:"date",children:new Date(e.date).toLocaleDateString()})]})},e._id):null})));var g=Object(c.useState)({username:"",text:""}),N=Object(l.a)(g,2),S=N[0],w=N[1];return x?Object(u.jsx)(h,{}):Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(O,{}),Object(u.jsxs)(m.c,{children:[Object(u.jsx)(m.a,{path:"/:id",children:Object(u.jsx)(b,{posts:n,addComment:function(e){e.preventDefault();var t=e.target.getAttribute("data-id"),c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)};fetch("".concat(f,"/posts/").concat(t,"/comment"),c).then((function(e){return e.json()})).then((function(e){var c,s=n.filter((function(e,n){return e._id===t&&(c=n),e._id===t}))[0];if("Success"===e.status){var i=function(e){return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{comments:Object(o.a)(e.comments)})}))}(n);i.splice(c,1,Object(j.a)(Object(j.a)({},s),{},{comments:[].concat(Object(o.a)(s.comments),[Object(j.a)(Object(j.a)({},e.comment),{},{date:Date.now()})])})),a(i),w({username:"",text:""})}}))},handleInput:function(e){w(Object(j.a)(Object(j.a)({},S),{},Object(r.a)({},e.target.name,e.target.value)))},comment:S})}),Object(u.jsxs)(m.a,{exact:!0,path:"/",children:[Object(u.jsx)("div",{className:"title",children:Object(u.jsx)("h1",{children:"Blog Posts"})}),Object(u.jsx)("ul",{children:v})]})]})]})};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(d.a,{children:Object(u.jsx)(x,{})})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f660a4f5.chunk.js.map